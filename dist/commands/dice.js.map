{"version":3,"sources":["../../src/commands/dice.ts"],"sourcesContent":["import {\r\n\tApplicationCommandOptionType,\r\n\tApplicationCommandType,\r\n\tButtonStyle,\r\n\tComponentType,\r\n} from \"discord-api-types/v10\";\r\nimport type { ReceivedInteraction } from \"../util\";\r\nimport { createCommand, randomNumber } from \"../util\";\r\n\r\nconst dice = async (\r\n\tinteraction: ReceivedInteraction,\r\n\tcount: number,\r\n\tephemeral?: boolean\r\n) => {\r\n\tif (count < 1 || count > 100) {\r\n\t\tawait interaction.reply({\r\n\t\t\tcontent: \"Il numero dei dadi deve essere compreso tra 1 e 100!\",\r\n\t\t\tephemeral: true,\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tconst results: number[] = [];\r\n\tlet result = 0;\r\n\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst roll = randomNumber(1, 6);\r\n\r\n\t\tresult += roll;\r\n\t\tresults.push(roll);\r\n\t}\r\n\tawait interaction.reply({\r\n\t\tcontent: `🎲 **${result}** (${results.join(\", \")}) con ${count} dadi!`,\r\n\t\tcomponents: [\r\n\t\t\t{\r\n\t\t\t\ttype: ComponentType.ActionRow,\r\n\t\t\t\tcomponents: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: ComponentType.Button,\r\n\t\t\t\t\t\tcustom_id: `dice-${count}`,\r\n\t\t\t\t\t\tlabel: \"Tira di nuovo!\",\r\n\t\t\t\t\t\tstyle: ButtonStyle.Success,\r\n\t\t\t\t\t\temoji: {\r\n\t\t\t\t\t\t\tname: \"🎲\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\tephemeral,\r\n\t});\r\n};\r\n\r\nexport const command = createCommand({\r\n\tdata: [\r\n\t\t{\r\n\t\t\tname: \"dice\",\r\n\t\t\tdescription: \"Tira il dado!\",\r\n\t\t\ttype: ApplicationCommandType.ChatInput,\r\n\t\t\toptions: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \"count\",\r\n\t\t\t\t\tdescription: \"Il numero di dadi da tirare (default: 1)\",\r\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\r\n\t\t\t\t\tmin_value: 1,\r\n\t\t\t\t\tmax_value: 100,\r\n\t\t\t\t\trequired: false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t],\r\n\tasync run(interaction) {\r\n\t\tconst count = interaction.options.data[0]?.value ?? 1;\r\n\r\n\t\tif (typeof count !== \"number\") {\r\n\t\t\tawait interaction.reply({\r\n\t\t\t\tcontent: \"Numero di dadi non valido!\",\r\n\t\t\t\tephemeral: true,\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait dice(interaction, count);\r\n\t},\r\n\tasync component(interaction) {\r\n\t\tconst count = Number(interaction.customId.split(\"-\")[1]);\r\n\r\n\t\tif (isNaN(count)) {\r\n\t\t\tawait interaction.reply({\r\n\t\t\t\tcontent: \"Numero di dadi non valido!\",\r\n\t\t\t\tephemeral: true,\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait dice(interaction, count, true);\r\n\t},\r\n});\r\n"],"mappings":"6EAAA,qIASA,GAAM,GAAO,MACZ,EACA,EACA,IACI,CACJ,GAAI,EAAQ,GAAK,EAAQ,IAAK,CAC7B,KAAM,GAAY,MAAM,CACvB,QAAS,uDACT,UAAW,EACZ,CAAC,EACD,MACD,CACA,GAAM,GAAoB,CAAC,EACvB,EAAS,EAEb,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC/B,GAAM,GAAO,EAAa,EAAG,CAAC,EAE9B,GAAU,EACV,EAAQ,KAAK,CAAI,CAClB,CACA,KAAM,GAAY,MAAM,CACvB,QAAS,eAAQ,QAAa,EAAQ,KAAK,IAAI,UAAU,UACzD,WAAY,CACX,CACC,KAAM,EAAc,UACpB,WAAY,CACX,CACC,KAAM,EAAc,OACpB,UAAW,QAAQ,IACnB,MAAO,iBACP,MAAO,EAAY,QACnB,MAAO,CACN,KAAM,WACP,CACD,CACD,CACD,CACD,EACA,WACD,CAAC,CACF,EAEa,EAAU,EAAc,CACpC,KAAM,CACL,CACC,KAAM,OACN,YAAa,gBACb,KAAM,EAAuB,UAC7B,QAAS,CACR,CACC,KAAM,QACN,YAAa,2CACb,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,IACX,SAAU,EACX,CACD,CACD,CACD,EACA,KAAM,KAAI,EAAa,CACtB,GAAM,GAAQ,EAAY,QAAQ,KAAK,IAAI,OAAS,EAEpD,GAAI,MAAO,IAAU,SAAU,CAC9B,KAAM,GAAY,MAAM,CACvB,QAAS,6BACT,UAAW,EACZ,CAAC,EACD,MACD,CACA,KAAM,GAAK,EAAa,CAAK,CAC9B,EACA,KAAM,WAAU,EAAa,CAC5B,GAAM,GAAQ,OAAO,EAAY,SAAS,MAAM,GAAG,EAAE,EAAE,EAEvD,GAAI,MAAM,CAAK,EAAG,CACjB,KAAM,GAAY,MAAM,CACvB,QAAS,6BACT,UAAW,EACZ,CAAC,EACD,MACD,CACA,KAAM,GAAK,EAAa,EAAO,EAAI,CACpC,CACD,CAAC","names":[]}