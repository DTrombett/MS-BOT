{"version":3,"sources":["../../src/commands/dog.ts"],"sourcesContent":["import {\r\n\tApplicationCommandType,\r\n\tButtonStyle,\r\n\tComponentType,\r\n} from \"discord-api-types/v10\";\r\nimport { env } from \"node:process\";\r\nimport { request } from \"undici\";\r\nimport type { DogResponse, ReceivedInteraction } from \"../util\";\r\nimport { createCommand } from \"../util\";\r\n\r\nconst dog = async (interaction: ReceivedInteraction, ephemeral?: boolean) => {\r\n\tconst data = await request(\r\n\t\t\"https://api.thedogapi.com/v1/images/search?order=RANDOM&limit=1&format=json\",\r\n\t\t{\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"x-api-key\": env.DOG_API_KEY!,\r\n\t\t\t},\r\n\t\t}\r\n\t).then<DogResponse | null>((res) => res.body.json());\r\n\r\n\tif (!data?.[0]) {\r\n\t\tawait interaction.reply({\r\n\t\t\tcontent: \"Si √® verificato un errore nel caricamento dell'immagine!\",\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tconst [{ url }] = data;\r\n\r\n\tawait interaction.reply({\r\n\t\tcontent: `[Woof!](${url}) üê∂`,\r\n\t\tephemeral,\r\n\t\tcomponents: [\r\n\t\t\t{\r\n\t\t\t\ttype: ComponentType.ActionRow,\r\n\t\t\t\tcomponents: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: ComponentType.Button,\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\tstyle: ButtonStyle.Link,\r\n\t\t\t\t\t\tlabel: \"Apri l'originale\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: ComponentType.Button,\r\n\t\t\t\t\t\tstyle: ButtonStyle.Success,\r\n\t\t\t\t\t\tlabel: \"Un altro!\",\r\n\t\t\t\t\t\tcustom_id: \"dog\",\r\n\t\t\t\t\t\temoji: { name: \"üê∂\" },\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t});\r\n};\r\n\r\nexport const command = createCommand({\r\n\tdata: [\r\n\t\t{\r\n\t\t\tname: \"dog\",\r\n\t\t\tdescription: \"Mostra la foto di un adorabile cagnolino\",\r\n\t\t\ttype: ApplicationCommandType.ChatInput,\r\n\t\t},\r\n\t],\r\n\tasync run(interaction) {\r\n\t\tawait dog(interaction);\r\n\t},\r\n\tasync component(interaction) {\r\n\t\tawait dog(interaction, true);\r\n\t},\r\n});\r\n"],"mappings":"iEAAA,mGAKA,mCACA,iCAIA,GAAM,GAAM,MAAO,EAAkC,IAAwB,CAC5E,GAAM,GAAO,KAAM,GAClB,8EACA,CACC,OAAQ,MACR,QAAS,CACR,YAAa,EAAI,WAClB,CACD,CACD,EAAE,KAAyB,AAAC,GAAQ,EAAI,KAAK,KAAK,CAAC,EAEnD,GAAI,CAAC,IAAO,GAAI,CACf,KAAM,GAAY,MAAM,CACvB,QAAS,6DACV,CAAC,EACD,MACD,CACA,GAAM,CAAC,CAAE,QAAS,EAElB,KAAM,GAAY,MAAM,CACvB,QAAS,WAAW,eACpB,YACA,WAAY,CACX,CACC,KAAM,EAAc,UACpB,WAAY,CACX,CACC,KAAM,EAAc,OACpB,MACA,MAAO,EAAY,KACnB,MAAO,kBACR,EACA,CACC,KAAM,EAAc,OACpB,MAAO,EAAY,QACnB,MAAO,YACP,UAAW,MACX,MAAO,CAAE,KAAM,WAAK,CACrB,CACD,CACD,CACD,CACD,CAAC,CACF,EAEa,EAAU,EAAc,CACpC,KAAM,CACL,CACC,KAAM,MACN,YAAa,2CACb,KAAM,EAAuB,SAC9B,CACD,EACA,KAAM,KAAI,EAAa,CACtB,KAAM,GAAI,CAAW,CACtB,EACA,KAAM,WAAU,EAAa,CAC5B,KAAM,GAAI,EAAa,EAAI,CAC5B,CACD,CAAC","names":[]}