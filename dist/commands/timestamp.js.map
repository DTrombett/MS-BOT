{"version":3,"sources":["../../src/commands/timestamp.ts"],"sourcesContent":["import { TimestampStyles } from \"@discordjs/builders\";\nimport {\n\tApplicationCommandOptionType,\n\tApplicationCommandType,\n\tButtonStyle,\n\tComponentType,\n} from \"discord-api-types/v10\";\nimport type { ReceivedInteraction } from \"../util\";\nimport { createCommand } from \"../util\";\n\nconst styles = Object.values(TimestampStyles);\n\ntype TimestampOptions = {\n\tyear?: number;\n\tmonth?: number;\n\tdate?: number;\n\thours?: number;\n\tminutes?: number;\n\tseconds?: number;\n};\n\nconst timestamp = async (\n\tinteraction: ReceivedInteraction,\n\toptions: TimestampOptions = {},\n\tephemeral?: boolean\n) => {\n\tif (typeof options.year !== typeof options.month) {\n\t\tawait interaction.reply({\n\t\t\tephemeral: true,\n\t\t\tcontent:\n\t\t\t\t\"Un timestamp personalizzato richiede sia l'anno che il mese! Se non vuoi un timestamp personalizzato non inserire nessuna opzione.\",\n\t\t});\n\t\treturn;\n\t}\n\tconst d = Math.round(\n\t\t(options.year === undefined\n\t\t\t? new Date()\n\t\t\t: new Date(\n\t\t\t\t\tnew Date(\n\t\t\t\t\t\toptions.year,\n\t\t\t\t\t\toptions.month! - 1,\n\t\t\t\t\t\toptions.date ?? 1,\n\t\t\t\t\t\toptions.hours ?? 0,\n\t\t\t\t\t\toptions.minutes ?? 0,\n\t\t\t\t\t\toptions.seconds ?? 0\n\t\t\t\t\t).toLocaleString(\"it-IT\", {\n\t\t\t\t\t\ttimeZone: \"Europe/Rome\",\n\t\t\t\t\t})\n\t\t\t  )\n\t\t).getTime() / 1000\n\t);\n\tawait interaction.reply({\n\t\tcontent: `<t:${d}> (\\`<t:${d}>\\`)\\n\\n${styles\n\t\t\t.map((style) => `<t:${d}:${style}> (\\`<t:${d}:${style}>\\`)`)\n\t\t\t.join(\"\\n\")}`,\n\t\tcomponents: [\n\t\t\t{\n\t\t\t\ttype: ComponentType.ActionRow,\n\t\t\t\tcomponents: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: ComponentType.Button,\n\t\t\t\t\t\tlabel: \"Genera nuova!\",\n\t\t\t\t\t\tcustom_id: \"timestamp\",\n\t\t\t\t\t\tstyle: ButtonStyle.Primary,\n\t\t\t\t\t\temoji: { name: \"âŒš\" },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tephemeral,\n\t});\n};\n\nexport const command = createCommand({\n\tdata: [\n\t\t{\n\t\t\tname: \"timestamp\",\n\t\t\tdescription: \"Genera un timestamp per una certa data\",\n\t\t\ttype: ApplicationCommandType.ChatInput,\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tname: \"year\",\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t\"L'anno solare (richiesto per un timestamp personalizzato)\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"month\",\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t\"Il mese dell'anno (richiesto per una timestamp personalizzata)\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t\tmin_value: 1,\n\t\t\t\t\tmax_value: 12,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"date\",\n\t\t\t\t\tdescription: \"Il giorno del mese\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t\tmin_value: 1,\n\t\t\t\t\tmax_value: 31,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"hours\",\n\t\t\t\t\tdescription: \"Le ore del giorno\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t\tmin_value: 0,\n\t\t\t\t\tmax_value: 23,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"minutes\",\n\t\t\t\t\tdescription: \"I minuti\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t\tmin_value: 0,\n\t\t\t\t\tmax_value: 59,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"seconds\",\n\t\t\t\t\tdescription: \"I secondi\",\n\t\t\t\t\ttype: ApplicationCommandOptionType.Integer,\n\t\t\t\t\tmin_value: 0,\n\t\t\t\t\tmax_value: 59,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tasync run(interaction) {\n\t\tconst options: TimestampOptions = {};\n\n\t\tfor (const option of interaction.options.data)\n\t\t\tif (typeof option.value === \"number\")\n\t\t\t\toptions[option.name as keyof TimestampOptions] = option.value;\n\t\tawait timestamp(interaction, options);\n\t},\n\tasync component(interaction) {\n\t\tawait timestamp(interaction, undefined, true);\n\t},\n});\n"],"mappings":"sEAAA,sDACA,qIASA,GAAM,GAAS,OAAO,OAAO,CAAe,EAWtC,EAAY,MACjB,EACA,EAA4B,CAAC,EAC7B,IACI,CACJ,GAAI,MAAO,GAAQ,MAAS,MAAO,GAAQ,MAAO,CACjD,KAAM,GAAY,MAAM,CACvB,UAAW,GACX,QACC,oIACF,CAAC,EACD,MACD,CACA,GAAM,GAAI,KAAK,MACb,GAAQ,OAAS,OACf,GAAI,MACJ,GAAI,MACJ,GAAI,MACH,EAAQ,KACR,EAAQ,MAAS,EACjB,EAAQ,MAAQ,EAChB,EAAQ,OAAS,EACjB,EAAQ,SAAW,EACnB,EAAQ,SAAW,CACpB,EAAE,eAAe,QAAS,CACzB,SAAU,aACX,CAAC,CACD,GACD,QAAQ,EAAI,GACf,EACA,KAAM,GAAY,MAAM,CACvB,QAAS,MAAM,YAAY;AAAA;AAAA,EAAY,EACrC,IAAI,AAAC,GAAU,MAAM,KAAK,YAAgB,KAAK,OAAW,EAC1D,KAAK;AAAA,CAAI,IACX,WAAY,CACX,CACC,KAAM,EAAc,UACpB,WAAY,CACX,CACC,KAAM,EAAc,OACpB,MAAO,gBACP,UAAW,YACX,MAAO,EAAY,QACnB,MAAO,CAAE,KAAM,QAAI,CACpB,CACD,CACD,CACD,EACA,WACD,CAAC,CACF,EAEa,EAAU,EAAc,CACpC,KAAM,CACL,CACC,KAAM,YACN,YAAa,yCACb,KAAM,EAAuB,UAC7B,QAAS,CACR,CACC,KAAM,OACN,YACC,4DACD,KAAM,EAA6B,OACpC,EACA,CACC,KAAM,QACN,YACC,iEACD,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,EACZ,EACA,CACC,KAAM,OACN,YAAa,qBACb,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,EACZ,EACA,CACC,KAAM,QACN,YAAa,oBACb,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,EACZ,EACA,CACC,KAAM,UACN,YAAa,WACb,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,EACZ,EACA,CACC,KAAM,UACN,YAAa,YACb,KAAM,EAA6B,QACnC,UAAW,EACX,UAAW,EACZ,CACD,CACD,CACD,EACA,KAAM,KAAI,EAAa,CACtB,GAAM,GAA4B,CAAC,EAEnC,OAAW,KAAU,GAAY,QAAQ,KACxC,AAAI,MAAO,GAAO,OAAU,UAC3B,GAAQ,EAAO,MAAkC,EAAO,OAC1D,KAAM,GAAU,EAAa,CAAO,CACrC,EACA,KAAM,WAAU,EAAa,CAC5B,KAAM,GAAU,EAAa,OAAW,EAAI,CAC7C,CACD,CAAC","names":[]}