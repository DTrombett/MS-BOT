{"version":3,"sources":["../../../src/events/rest/response.ts"],"sourcesContent":["import { URLSearchParams } from \"node:url\";\r\nimport type { EventOptions } from \"../../util\";\r\nimport { color, Color, CustomClient, EventType } from \"../../util\";\r\nimport { requests } from \"./request\";\r\n\r\nconst statusColor: Record<number, Color> = {\r\n\t100: Color.Cyan,\r\n\t200: Color.Green,\r\n\t300: Color.Brown,\r\n\t400: Color.Red,\r\n\t500: Color.Magenta,\r\n};\r\n\r\nexport const event: EventOptions<EventType.Rest, \"response\"> = {\r\n\tname: \"response\",\r\n\ttype: EventType.Rest,\r\n\ton(request, response) {\r\n\t\tconst r = `${request.method} ${request.path}` as const;\r\n\t\tconst time = requests[r];\r\n\r\n\t\tif (time === undefined) return;\r\n\t\tCustomClient.printToStdout(\r\n\t\t\tcolor(\r\n\t\t\t\t`${r}${\r\n\t\t\t\t\trequest.options.query\r\n\t\t\t\t\t\t? `?${new URLSearchParams(request.options.query).toString()}`\r\n\t\t\t\t\t\t: \"\"\r\n\t\t\t\t} - ${color(\r\n\t\t\t\t\t`${response.statusCode}`,\r\n\t\t\t\t\tstatusColor[Math.floor(response.statusCode / 100) * 100]\r\n\t\t\t\t)} (${Date.now() - time}ms)`,\r\n\t\t\t\tColor.Cyan\r\n\t\t\t)\r\n\t\t);\r\n\t\tdelete requests[r];\r\n\t},\r\n};\r\n"],"mappings":"+JAAA,2CAKA,GAAM,GAAqC,CAC1C,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,EACN,EAEa,EAAkD,CAC9D,KAAM,WACN,KAAM,OACN,GAAG,EAAS,EAAU,CACrB,GAAM,GAAI,GAAG,EAAQ,UAAU,EAAQ,OACjC,EAAO,EAAS,GAEtB,AAAI,IAAS,QACb,GAAa,cACZ,EACC,GAAG,IACF,EAAQ,QAAQ,MACb,IAAI,GAAI,GAAgB,EAAQ,QAAQ,KAAK,EAAE,SAAS,IACxD,QACE,EACL,GAAG,EAAS,aACZ,EAAY,KAAK,MAAM,EAAS,WAAa,GAAG,EAAI,IACrD,MAAM,KAAK,IAAI,EAAI,OACnB,EACD,CACD,EACA,MAAO,GAAS,GACjB,CACD","names":[]}